app:
  fullnameOverride: sample-spring

  image:
    repository: 082867736673.dkr.ecr.ap-northeast-2.amazonaws.com/nalbam/sample-spring
    # repository: nalbam/sample-spring

  autoscaling:
    enabled: true
    maxReplicas: 5
    minReplicas: 1
    behavior:
      scaleDown:
        policies:
        - periodSeconds: 60
          type: Percent
          value: 25
        stabilizationWindowSeconds: 600
    metrics:
    - resource:
        name: cpu
        target:
          averageUtilization: 50
          type: Utilization
      type: Resource

  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi

  controller:
    # kind: Rollout
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 0
      # blueGreen:
      #   activeService: sample-spring
      #   autoPromotionEnabled: true
      #   autoPromotionSeconds: 30
      #   previewService: sample-spring-preview

  service:
    name: http
    targetPort: 8080

  readinessProbe:
    failureThreshold: 3
    httpGet:
      path: /
      port: 8080
    initialDelaySeconds: 20
    periodSeconds: 10

  livenessProbe:
    failureThreshold: 3
    httpGet:
      path: /
      port: 8080
    initialDelaySeconds: 20
    periodSeconds: 10
