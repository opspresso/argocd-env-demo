app:
  autoscaling:
    behavior:
      scaleDown:
        policies:
        - periodSeconds: 60
          type: Percent
          value: 25
        stabilizationWindowSeconds: 600
    enabled: true
    maxReplicas: 6
    metrics:
    - resource:
        name: cpu
        target:
          averageUtilization: 60
          type: Utilization
      type: Resource
    minReplicas: 2
  configmap:
    data:
      CLUSTER_NAME: eks-demo
      HOSTNAME: bruce.spic.me
      MESSAGE: hello world
      VERSION: v0.8.50
    enabled: true
  # controller:
  #   kind: Rollout
  #   strategy:
  #     canary:
  #       canaryService: sample-node-preview
  #       stableService: sample-node
  #       steps:
  #       - setWeight: 25
  #       - pause:
  #           duration: 10
  #       - analysis:
  #           args:
  #           - name: url
  #             value: http://sample-node-preview:3000/success/95
  #           templates:
  #           - clusterScope: true
  #             templateName: http-benchmark
  #       - setWeight: 50
  #       - pause:
  #           duration: 10
  #       - setWeight: 75
  #       - pause:
  #           duration: 10
  env:
  - name: PROFILE
    value: dev
  - name: ENV_HASH
    value: c65eb1e52afe1e23e5b2bb7685b5d49a
  image:
    tag: v0.8.50
  ingress:
    annotations:
      kubernetes.io/ingress.class: nginx
      kubernetes.io/ssl-redirect: 'true'
    enabled: false
    hosts:
    - host: sample-node.bruce.spic.me
    # preview:
    #   enabled: false
    #   hosts:
    #   - host: sample-node-preview.bruce.spic.me
  istio:
    gateway:
      enabled: true
    sidecar:
      inject: true
  nodeSelector:
    group: graviton
  # service:
  #   preview:
  #     enabled: true
  tolerations:
  - effect: NoSchedule
    key: group
    operator: Equal
    value: graviton
redis:
  istio:
    sidecar:
      inject: true
  nodeSelector:
    group: graviton
  tolerations:
  - effect: NoSchedule
    key: group
    operator: Equal
    value: graviton
