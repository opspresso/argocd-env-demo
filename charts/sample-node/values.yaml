app:
  fullnameOverride: sample-node

  image:
    repository: 082867736673.dkr.ecr.ap-northeast-2.amazonaws.com/nalbam/sample-node

  resources:
    limits:
      cpu: 250m
      memory: 256Mi
    requests:
      cpu: 250m
      memory: 256Mi

  # controller:
  #   kind: Rollout
  #   strategy:
  #     canary:
  #       canaryService: sample-node-preview
  #       stableService: sample-node
  #       steps:
  #       - setWeight: 25
  #       - pause:
  #           duration: 10
  #       - analysis:
  #           args:
  #           - name: url
  #             value: http://sample-node-preview:3000/success/95
  #           templates:
  #           - clusterScope: true
  #             templateName: http-benchmark
  #       - setWeight: 50
  #       - pause:
  #           duration: 10
  #       - setWeight: 75
  #       - pause:
  #           duration: 10

  service:
    name: http
    port: 3000
  #   preview:
  #     enabled: true

  ingress:
    enabled: false
    annotations:
      kubernetes.io/ingress.class: nginx
      kubernetes.io/ssl-redirect: 'true'
    # preview:
    #   enabled: false
    #   hosts:
    #   - host: sample-node-preview.bruce.spic.me

  readinessProbe:
    failureThreshold: 3
    httpGet:
      path: /
      port: 3000
    initialDelaySeconds: 3
    periodSeconds: 3

  livenessProbe:
    failureThreshold: 3
    httpGet:
      path: /
      port: 3000
    initialDelaySeconds: 3
    periodSeconds: 3

redis:
  fullnameOverride: sample-redis

  image:
    repository: redis
    tag: alpine

  resources:
    limits:
      cpu: 100m
      memory: 128Mi
    requests:
      cpu: 100m
      memory: 128Mi

  service:
    name: redis
    port: 6379
