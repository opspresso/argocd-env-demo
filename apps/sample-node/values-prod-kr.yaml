analysis:
  enabled: true
  prometheus: http://prometheus-k8s.addon-monitoring.svc.cluster.local:9090
  service: sample-node.sample.svc.cluster.local
  url: http://sample-node-preview:3000/success/98
configmap:
  data:
    MESSAGE: hello world
    VERSION: v0.7.17
  enabled: true
controller:
  kind: Rollout
env:
- name: PROFILE
  value: prod
- name: ENV_HASH
  value: 246727856506cee3ac618bd183682a7e
image:
  repository: nalbam/sample-node
  tag: v0.7.17
ingress:
  annotations:
    kubernetes.io/ingress.class: nginx-public
  enabled: false
  hosts:
  - host: sample-node.prod.kr.karrotmarket.com
    paths:
    - /
  - host: sample-node.prod-a.kr.karrotmarket.com
    paths:
    - /
  - host: sample-node.prod-b.kr.karrotmarket.com
    paths:
    - /
istio:
  gateway:
    enabled: true
  virtualService:
    enabled: true
preview:
  annotations:
    kubernetes.io/ingress.class: nginx-public
  enabled: true
  hosts:
  - host: sample-node-preview.prod.kr.karrotmarket.com
    paths:
    - /
  - host: sample-node-preview.prod-a.kr.karrotmarket.com
    paths:
    - /
  - host: sample-node-preview.prod-b.kr.karrotmarket.com
    paths:
    - /
replicaCount: 4
secret:
  data:
    SECRET_MESSAGE: c2VjcmV0IG1lc3NhZ2U=
    SECRET_VERSION: djAuNy4xNw==
  enabled: true
strategy:
  canary:
    canaryService: sample-node-preview
    steps:
    - setWeight: 25
    - pause:
        duration: 30
    - analysis:
        templates:
        - templateName: sample-node-http-benchmark
    - setWeight: 50
    - pause:
        duration: 30
    - setWeight: 75
    - pause:
        duration: 30
